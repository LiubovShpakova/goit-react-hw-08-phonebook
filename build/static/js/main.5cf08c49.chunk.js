(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[1],{131:function(e,t,n){"use strict";n.r(t);var c,r,a,s,o,u,i,b,j=n(0),l=n.n(j),d=n(25),O=n.n(d),h=n(20),g=n(18),f=(n(84),n(64)),p=n(33),v=n(34),x=n(36),m=n(35),C=(n(85),n(11)),k=n(37),S=n(21),y=n(39),E={getIsAuthenticated:function(e){return e.auth.loggedIn},getUsername:function(e){return e.auth.user.name}},R=n(1),q=Object(g.b)((function(e){return{isAuthenticated:E.getIsAuthenticated(e)}}))((function(e){var t=e.component,n=e.isAuthenticated,c=e.redirectTo,r=Object(y.a)(e,["component","isAuthenticated","redirectTo"]);return Object(R.jsx)(C.b,Object(S.a)(Object(S.a)({},r),{},{render:function(e){return n?Object(R.jsx)(t,Object(S.a)({},e)):Object(R.jsx)(C.a,{to:c})}}))})),U=Object(g.b)((function(e){return{isAuthenticated:E.getIsAuthenticated(e)}}))((function(e){var t=e.component,n=e.isAuthenticated,c=e.redirectTo,r=Object(y.a)(e,["component","isAuthenticated","redirectTo"]);return Object(R.jsx)(C.b,Object(S.a)(Object(S.a)({},r),{},{render:function(e){return n&&r.restricted?Object(R.jsx)(C.a,{to:c}):Object(R.jsx)(t,Object(S.a)({},e))}}))})),w=n(31),_=n(135),A=n(134),N=n(136),I=n(133),T=function(){return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(I.a,{variant:"secondary",className:"m-2",children:Object(R.jsx)(h.b,{to:"/register",className:"nav__link",activeClassName:"active__link",children:"Sign out"})}),Object(R.jsx)(I.a,{variant:"secondary",className:"m-2",children:Object(R.jsx)(h.b,{to:"/login",className:"nav__link",activeClassName:"active__link",children:"Log In"})})]})},z=n(32),F=n.p+"static/media/user.c8077d55.png",L=z.a.div(c||(c=Object(w.a)(["\n  .btn-secondary,\n  h4,\n  .avatar {\n    color: #d1abc4;\n    margin-right: 5px;\n  }\n  div {\n    display: flex;\n  }\n"]))),P={onLogout:k.a.logOut},B=Object(g.b)((function(e){return{name:E.getUsername(e)}}),P)((function(e){var t=e.name,n=e.onLogout;return Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(L,{children:Object(R.jsxs)("div",{children:[Object(R.jsx)("img",{src:F,alt:"",width:"40",className:"avatar"}),Object(R.jsxs)("h4",{children:["Welcome, ",t]}),Object(R.jsx)(I.a,{variant:"secondary",className:"mr-2",type:"button",onClick:n,children:"Logout"})]})})})})),D=z.a.div(r||(r=Object(w.a)(["\n  a,\n  .navbar-brand,\n  navbar-nav .nav-link {\n    color: #d1abc4;\n    &:hover {\n      color: white;\n    }\n  }\n"]))),G=Object(g.b)((function(e){return{isAuthenticated:E.getIsAuthenticated(e)}}))((function(e){var t=e.isAuthenticated;return Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(D,{children:Object(R.jsx)(_.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:Object(R.jsxs)(A.a,{children:[Object(R.jsx)(_.a.Brand,{children:"Phonebook"}),Object(R.jsx)(_.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(R.jsxs)(_.a.Collapse,{id:"responsive-navbar-nav",children:[Object(R.jsxs)(N.a,{className:"mr-auto",children:[Object(R.jsx)(N.a.Link,{children:Object(R.jsx)(h.b,{exact:!0,to:"/",className:"nav__link",activeClassName:"active__link",children:"Home"})}),Object(R.jsx)(N.a.Link,{children:Object(R.jsx)(h.b,{to:"/contacts",className:"nav__link",activeClassName:"active__link",children:"Contacts"})})]}),Object(R.jsx)(N.a,{children:t?Object(R.jsx)(B,{}):Object(R.jsx)(T,{})})]})]})})})})})),J=n(70),M=n.n(J),H=(n(128),function(e){Object(x.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"render",value:function(){return Object(R.jsx)(M.a,{type:"ThreeDots",color:"#d1abc4",height:100,width:100,timeout:3e3})}}]),n}(j.Component)),W=Object(j.lazy)((function(){return n.e(5).then(n.bind(null,141))})),K=Object(j.lazy)((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,142))})),Q=Object(j.lazy)((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,143))})),V=Object(j.lazy)((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,145))})),X=function(e){Object(x.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(G,{}),Object(R.jsx)(j.Suspense,{fallback:Object(R.jsx)(H,{}),children:Object(R.jsxs)(C.d,{children:[Object(R.jsx)(U,{exact:!0,path:"/",component:W}),Object(R.jsx)(q,{exact:!0,path:"/contacts",redirectTo:"/login",component:V}),Object(R.jsx)(U,{exact:!0,path:"/register",redirectTo:"/contacts",restricted:!0,component:K}),Object(R.jsx)(U,{exact:!0,path:"/login",redirectTo:"/contacts",restricted:!0,component:Q})]})})]})}}]),n}(j.Component),Y={onGetCurrentUser:k.a.getCurrentUser},Z=Object(g.b)(null,Y)(X),$=n(41),ee=n(3),te=n(71),ne=n.n(te),ce=n(24),re=n(72),ae=n.n(re),se=n(4),oe=n(13),ue=n(15),ie=Object(ee.c)([],(a={},Object(se.a)(a,ue.a.fetchContactsSuccess,(function(e,t){return t.payload})),Object(se.a)(a,ue.a.addContactSuccess,(function(e,t){var n=t.payload;return[].concat(Object($.a)(e),[n])})),Object(se.a)(a,ue.a.deleteContactSuccess,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),a)),be=Object(ee.c)(!1,(s={},Object(se.a)(s,ue.a.fetchContactsRequest,(function(){return!0})),Object(se.a)(s,ue.a.fetchContactsSuccess,(function(){return!1})),Object(se.a)(s,ue.a.fetchContactsError,(function(){return!1})),Object(se.a)(s,ue.a.addContactRequest,(function(){return!0})),Object(se.a)(s,ue.a.addContactSuccess,(function(){return!1})),Object(se.a)(s,ue.a.addContactError,(function(){return!1})),Object(se.a)(s,ue.a.deleteContactRequest,(function(){return!0})),Object(se.a)(s,ue.a.deleteContactSuccess,(function(){return!1})),Object(se.a)(s,ue.a.deleteContactError,(function(){return!1})),s)),je=Object(ee.c)("",Object(se.a)({},ue.a.changeFilter,(function(e,t){return t.payload}))),le=Object(ee.c)(null,{}),de=Object(oe.b)({items:ie,filter:je,loading:be,error:le}),Oe=n(6),he={name:null,email:null},ge=Object(ee.c)(he,(o={},Object(se.a)(o,Oe.a.registerSuccess,(function(e,t){return t.payload.user})),Object(se.a)(o,Oe.a.loginSuccess,(function(e,t){return t.payload.user})),Object(se.a)(o,Oe.a.logoutSuccess,(function(){return he})),Object(se.a)(o,Oe.a.getCurrentUserSuccess,(function(e,t){return t.payload})),o)),fe=Object(ee.c)(null,(u={},Object(se.a)(u,Oe.a.registerSuccess,(function(e,t){return t.payload.token})),Object(se.a)(u,Oe.a.loginSuccess,(function(e,t){return t.payload.token})),Object(se.a)(u,Oe.a.logoutSuccess,(function(){return null})),u)),pe=Object(ee.c)(!1,(i={},Object(se.a)(i,Oe.a.registerSuccess,(function(){return!0})),Object(se.a)(i,Oe.a.loginSuccess,(function(){return!0})),Object(se.a)(i,Oe.a.getCurrentUserSuccess,(function(){return!0})),Object(se.a)(i,Oe.a.logoutSuccess,(function(){return!1})),Object(se.a)(i,Oe.a.registerError,!1),Object(se.a)(i,Oe.a.loginError,!1),Object(se.a)(i,Oe.a.getCurrentUserError,!1),i)),ve=function(e,t){return t.payload},xe=Object(ee.c)(null,(b={},Object(se.a)(b,Oe.a.registerError,ve),Object(se.a)(b,Oe.a.loginError,ve),Object(se.a)(b,Oe.a.logoutError,ve),Object(se.a)(b,Oe.a.getCurrentUserError,ve),b)),me=Object(oe.b)({user:ge,token:fe,loggedIn:pe,error:xe}),Ce=[].concat(Object($.a)(Object(ee.d)({serializableCheck:{ignoredActions:[ce.a,ce.f,ce.b,ce.c,ce.d,ce.e]}})),[ne.a]),ke={key:"auth",storage:ae.a,whitelist:["token"]},Se=Object(ee.a)({reducer:{contacts:de,auth:Object(ce.g)(ke,me)},middleware:Ce}),ye={persistor:Object(ce.h)(Se),store:Se};O.a.render(Object(R.jsx)(l.a.StrictMode,{children:Object(R.jsx)(g.a,{store:ye.store,children:Object(R.jsx)(f.a,{loading:null,persistor:ye.persistor,children:Object(R.jsx)(h.a,{children:Object(R.jsx)(Z,{})})})})}),document.getElementById("root"))},15:function(e,t,n){"use strict";var c=n(3),r={fetchContactsRequest:Object(c.b)("contacts/fetchContactsRequest"),fetchContactsSuccess:Object(c.b)("contacts/fetchContactsSuccess"),fetchContactsError:Object(c.b)("contacts/fetchContactsError"),addContactRequest:Object(c.b)("contacts/addContactRequest"),addContactSuccess:Object(c.b)("contacts/addContactSuccess"),addContactError:Object(c.b)("contacts/addContactError"),deleteContactRequest:Object(c.b)("contacts/deleteContactRequest"),deleteContactSuccess:Object(c.b)("contacts/deleteContactSuccess"),deleteContactError:Object(c.b)("contacts/deleteContactError"),changeFilter:Object(c.b)("contacts/changeFilter")};t.a=r},37:function(e,t,n){"use strict";var c=n(23),r=n.n(c),a=n(30),s=n(28),o=n.n(s),u=n(6);o.a.defaults.baseURL="https://connections-api.herokuapp.com";var i={set:function(e){o.a.defaults.headers.common.Authorization="Bearer ".concat(e)},unset:function(){o.a.defaults.headers.common.Authorization=""}},b={token:i,register:function(e){return function(){var t=Object(a.a)(r.a.mark((function t(n){var c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(u.a.registerRequest()),t.prev=1,t.next=4,o.a.post("/users/signup",e);case 4:c=t.sent,i.set(c.data.token),n(u.a.registerSuccess(c.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(u.a.registerError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(e){return function(){var t=Object(a.a)(r.a.mark((function t(n){var c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(u.a.loginRequest()),t.prev=1,t.next=4,o.a.post("/users/login",e);case 4:c=t.sent,i.set(c.data.token),n(u.a.loginSuccess(c.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(u.a.loginError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logOut:function(){return function(){var e=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(u.a.logoutRequest()),e.prev=1,e.next=4,o.a.post("/users/logout");case 4:i.unset(),t(u.a.logoutSuccess()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(u.a.logoutError(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(a.a)(r.a.mark((function e(t,n){var c,a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n(),a=c.auth.token){e.next=3;break}return e.abrupt("return");case 3:return i.set(a),t(u.a.getCurrentUserRequest()),e.prev=5,e.next=8,o.a.get("/users/current");case 8:s=e.sent,t(u.a.getCurrentUserSuccess(s.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t(u.a.getCurrentUserError(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}()}};t.a=b},6:function(e,t,n){"use strict";var c=n(3),r={registerRequest:Object(c.b)("auth/registerRequest"),registerSuccess:Object(c.b)("auth/registerSuccess"),registerError:Object(c.b)("auth/registerError"),loginRequest:Object(c.b)("auth/loginRequest"),loginSuccess:Object(c.b)("auth/loginSuccess"),loginError:Object(c.b)("auth/loginError"),logoutRequest:Object(c.b)("auth/logoutRequest"),logoutSuccess:Object(c.b)("auth/logoutSuccess"),logoutError:Object(c.b)("auth/logoutError"),getCurrentUserRequest:Object(c.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(c.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(c.b)("auth/getCurrentUserError")};t.a=r},84:function(e,t,n){}},[[131,2,3]]]);
//# sourceMappingURL=main.5cf08c49.chunk.js.map